<div class="main-container">
  <!-- Section 1 : Parc immobilier -->
  <div class="page-title">
    <h2>Parc immobilier</h2>
    <span class="help-icon" title="Lorem ipsum">
        <svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="black"></circle>
          <rect x="11" y="10" width="2" height="6" fill="white"></rect>
          <circle cx="12" cy="8" r="1" fill="white"></circle>
        </svg>
    </span>
  </div>
  <details>
    <summary><strong>Saisir un nouveau b√¢timent</strong></summary>

    <label>Nom / Adresse :
      <input type="text" [(ngModel)]="nouveauBatiment.nom_ou_adresse"/>
    </label>

    <label>Date de construction :
      <input type="date" [(ngModel)]="nouveauBatiment.dateConstruction"/>
    </label>

    <label>Ce b√¢timent a-t-il √©t√© construit il y a moins de 50 ans ?
      <select [(ngModel)]="nouveauBatiment.moinsDe50ans">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <div *ngIf="nouveauBatiment.moinsDe50ans === false">
      <label>A-t-il subi une r√©novation compl√®te il y a moins de 50 ans ?
        <select [(ngModel)]="nouveauBatiment.renoComplete">
          <option [ngValue]="true">Oui</option>
          <option [ngValue]="false">Non</option>
        </select>
      </label>

      <label>Date de la derni√®re r√©novation compl√®te :
        <input type="date" [(ngModel)]="nouveauBatiment.dateDerniereGrosseRenovation"/>
      </label>
    </div>

    <label>Avez-vous une ACV de ce b√¢timent ?
      <select [(ngModel)]="nouveauBatiment.acvBatimentRealisee">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <label *ngIf="nouveauBatiment.acvBatimentRealisee">√âmissions de GES r√©elles (tCO2e/an) :
      <input type="number" [(ngModel)]="nouveauBatiment.emissionsGesReellesTCO2"/>
    </label>

    <label>Type de b√¢timent :
      <select [(ngModel)]="nouveauBatiment.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m¬≤) :
      <input type="number" [(ngModel)]="nouveauBatiment.surfaceEnM2"/>
    </label>

    <label>Type de structure :
      <select [(ngModel)]="nouveauBatiment.typeStructure">
        <option *ngFor="let structure of structureTypesLibelles" [ngValue]="structure.value">
          {{ structure.label }}
        </option>
      </select>
    </label>

    <button (click)="ajouterBatiment()">Ajouter ce b√¢timent</button>
  </details>

  <div *ngIf="batimentOnglet.batiments.length > 0">
    <h3>Liste des b√¢timents saisis</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Nom / Adresse</th>
        <th>Date construction</th>
        <th>Derni√®re r√©novation</th>
        <th>ACV</th>
        <th>√âmissions GES</th>
        <th>Type</th>
        <th>Surface (m¬≤)</th>
        <th>Structure</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let bat of batimentOnglet.batiments; let i = index">
        <td>{{ bat.nom_ou_adresse }}</td>
        <td>{{ bat.dateConstruction }}</td>
        <td>{{ bat.dateDerniereGrosseRenovation }}</td>
        <td>{{ bat.acvBatimentRealisee ? 'oui' : 'non' }}</td>
        <td>{{ bat.emissionsGesReellesTCO2 }}</td>
        <td>{{ getLibelleTypeBatiment(bat.typeBatiment) }}</td>
        <td>{{ bat.surfaceEnM2 }}</td>
        <td>{{ getLibelleTypeStructure(bat.typeStructure) }}</td>
        <td>
          <button (click)="supprimerBatiment(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>

  <!-- Section 2 : Entretien et r√©novations -->
  <h2>Entretien et r√©novations</h2>
  <details>
    <summary><strong>Saisir une r√©novation ponctuelle</strong></summary>

    <label>Nom du b√¢timent :
      <input type="text" [(ngModel)]="nouvelleReno.nom_adresse"/>
    </label>

    <label>Type de travaux :
      <select [(ngModel)]="nouvelleReno.typeTravaux">
        <option *ngFor="let travaux of travauxTypesLibelles" [ngValue]="travaux.value">
          {{ travaux.label }}
        </option>
      </select>
    </label>

    <label>Date des travaux :
      <input type="date" [(ngModel)]="nouvelleReno.dateTravaux"/>
    </label>

    <label>Type de b√¢timent :
      <select [(ngModel)]="nouvelleReno.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m¬≤) :
      <input type="number" [(ngModel)]="nouvelleReno.surfaceConcernee"/>
    </label>

    <label>Dur√©e amortissement (ann√©e) :
      <input type="number" [(ngModel)]="nouvelleReno.dureeAmortissement"/>
    </label>

    <button (click)="ajouterEntretien()">Ajouter cette r√©novation</button>
  </details>

  <div *ngIf="batimentOnglet.entretiens.length > 0">
    <h3>Liste des entretiens et r√©novations saisis</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Nom / Adresse</th>
        <th>Type de travaux</th>
        <th>Date des travaux</th>
        <th>Type de b√¢timent</th>
        <th>Surface (m¬≤)</th>
        <th>Dur√©e amortissement</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let reno of batimentOnglet.entretiens; let i = index">
        <td>{{ reno.nom_adresse }}</td>
        <td>{{ getLibelleTypeTravaux(reno.typeTravaux) }}</td>
        <td>{{ reno.dateTravaux }}</td>
        <td>{{ getLibelleTypeBatiment(reno.typeBatiment) }}</td>
        <td>{{ reno.surfaceConcernee }}</td>
        <td>{{ reno.dureeAmortissement }}</td>
        <td>
          <button (click)="supprimerRenovation(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>

  <!-- Section 3 : Mobilier -->
  <h2>Mobilier</h2>
  <details>
    <summary><strong>Saisir du mobilier</strong></summary>

    <label>Type de mobilier :
      <select [(ngModel)]="nouveauMobilier.mobilier">
        <option *ngFor="let type of mobilierTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Nombre :
      <input type="number" [(ngModel)]="nouveauMobilier.quantite"/>
    </label>

    <label>Poids (kg) :
      <input type="number" [(ngModel)]="nouveauMobilier.poidsDuProduit"/>
    </label>

    <label>Dur√©e amortissement (ann√©e) :
      <input type="number" [(ngModel)]="nouveauMobilier.dureeAmortissement"/>
    </label>

    <button (click)="ajouterMobilier()">Ajouter ce mobilier</button>
  </details>

  <div class="mobilier-table" *ngIf="batimentOnglet.mobiliers.length > 0">
    <h3>Liste du mobilier saisi</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Mobilier</th>
        <th>Quantit√©</th>
        <th>Poids (kg)</th>
        <th>Dur√©e amortissement</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let mobilier of batimentOnglet.mobiliers; let i = index">
        <td>{{ getLibelleTypeMobilier(mobilier.mobilier) }}</td>
        <td>{{ mobilier.quantite }}</td>
        <td>{{ mobilier.poidsDuProduit }}</td>
        <td>{{ mobilier.dureeAmortissement }}</td>
        <td>
          <button (click)="supprimerMobilier(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>
</div>
<app-save-footer [path]="'batimentsOnglet'" (estTermineChange)="onEstTermineChange($event)"></app-save-footer>
