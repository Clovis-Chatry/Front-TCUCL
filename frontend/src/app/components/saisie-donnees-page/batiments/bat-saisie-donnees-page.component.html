<div class="main-container">
  <!-- Section 1 : Parc immobilier -->
  <div class="page-title">
    <h2>Parc immobilier</h2>
    <span class="help-icon" title="Merci de renseigner TOUS vos b√¢timents qu'ils aient ou non moins de 50 ans, le calcul ne se fera que ceux qui ont moins de 50 ans soit par rapport √† leur date de construction, soit leur date de derni√®re r√©novation. Ainsi, seront calcul√©es les √©missions de G.E.S des b√¢timents ayant √©t√© construits il y a moins de 50 ans et ceux ayant √©t√© construits il y a plus de 50 ans mais ayant fait l'objet d'une r√©novation compl√®te (ou d'un ensemble de r√©novations cons√©quentes) il y a moins de 50 ans, dans ce cas les √©missions associ√©es seront moindres car il n'a pas fallu reconstruire une structure compl√®te (qui p√®se pour pr√®s de 50% des √©missions d'un b√¢timent). Ensuite, si vous avez r√©alis√© une ACV du b√¢timent, merci de renseigner la valeur r√©elle et la surface en m¬≤ sinon, merci de renseigner, le type de b√¢timent, la structure et la surface en m¬≤.
Vous pouvez ajouter / supprimer des b√¢timents.
Les b√¢timents qui ont √©t√© renseign√©es les ann√©es pr√©c√©dentes sont encore pr√©sents dans la liste et le calcul s'ils sont encore en cours d'amortissement, il n'y a pas besoin de les saisir √† nouveau.">
        <svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="black"></circle>
          <rect x="11" y="10" width="2" height="6" fill="white"></rect>
          <circle cx="12" cy="8" r="1" fill="white"></circle>
        </svg>
    </span>
  </div>
  <details>
    <summary><strong>Saisir un nouveau b√¢timent</strong></summary>

    <label>Nom / Adresse :
      <input type="text" [(ngModel)]="nouveauBatiment.nom_ou_adresse"/>
    </label>

    <label>Date de construction :
      <input type="date" [(ngModel)]="nouveauBatiment.dateConstruction"/>
    </label>

    <label>Ce b√¢timent a-t-il √©t√© construit il y a moins de 50 ans ?
      <select [(ngModel)]="nouveauBatiment.moinsDe50ans">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <div *ngIf="nouveauBatiment.moinsDe50ans === false">
      <label>A-t-il subi une r√©novation compl√®te il y a moins de 50 ans ?
        <select [(ngModel)]="nouveauBatiment.renoComplete">
          <option [ngValue]="true">Oui</option>
          <option [ngValue]="false">Non</option>
        </select>
      </label>

      <label>Date de la derni√®re r√©novation compl√®te :
        <input type="date" [(ngModel)]="nouveauBatiment.dateDerniereGrosseRenovation"/>
      </label>
    </div>

    <label>Avez-vous une ACV de ce b√¢timent ?
      <select [(ngModel)]="nouveauBatiment.acvBatimentRealisee">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <label *ngIf="nouveauBatiment.acvBatimentRealisee">√âmissions de GES r√©elles (tCO2e/an) :
      <input type="number" [(ngModel)]="nouveauBatiment.emissionsGesReellesTCO2"/>
    </label>

    <label>Type de b√¢timent :
      <select [(ngModel)]="nouveauBatiment.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m¬≤) :
      <input type="number" [(ngModel)]="nouveauBatiment.surfaceEnM2"/>
    </label>

    <label>Type de structure :
      <select [(ngModel)]="nouveauBatiment.typeStructure">
        <option *ngFor="let structure of structureTypesLibelles" [ngValue]="structure.value">
          {{ structure.label }}
        </option>
      </select>
    </label>

    <button (click)="ajouterBatiment()">Ajouter ce b√¢timent</button>
  </details>

  <div *ngIf="batimentOnglet.batiments.length > 0">
    <h3>Liste des b√¢timents saisis</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Nom / Adresse</th>
        <th>Date construction</th>
        <th>Derni√®re r√©novation</th>
        <th>ACV</th>
        <th>√âmissions GES</th>
        <th>Type</th>
        <th>Surface (m¬≤)</th>
        <th>Structure</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let bat of batimentOnglet.batiments; let i = index">
        <td>{{ bat.nom_ou_adresse }}</td>
        <td>{{ bat.dateConstruction }}</td>
        <td>{{ bat.dateDerniereGrosseRenovation }}</td>
        <td>{{ bat.acvBatimentRealisee ? 'oui' : 'non' }}</td>
        <td>{{ bat.emissionsGesReellesTCO2 }}</td>
        <td>{{ getLibelleTypeBatiment(bat.typeBatiment) }}</td>
        <td>{{ bat.surfaceEnM2 }}</td>
        <td>{{ getLibelleTypeStructure(bat.typeStructure) }}</td>
        <td>
          <button (click)="supprimerBatiment(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>

  <!-- Section 2 : Entretien et r√©novations -->
  <h2>Entretien et r√©novations</h2>
  <span class="help-icon" title="Merci de renseigner les petites r√©novations qui ne concernent qu'un lot : par exemple si vous avez refait toutes les peintures et sols des 2 premiers √©tages ou si vous avez refait toutes les fa√ßades et menuiseries d'une fa√ßade‚Ä¶ Merci donc de renseigner le type de travaux, l'ann√©e des travaux et la dur√©e d'amortissement comptable choisie. Ensuite, si vous avez r√©alis√© une analyse en cycle de vie, vous pouvez renseigner la donn√©e en Tonnes de CO2 sinon, renseigner le type de b√¢timent, la surface concern√©e par les travaux et la dur√©e d'amortissement. Attention, la surface concern√©e est celle impact√©e par les travaux. Par exemple, si vous installez une nouvelle centrale de traitement d'air dans un local de 30m¬≤ mais qui traitera l'air de 300m¬≤ de b√¢timent, la valeur correspondante est 300m¬≤.
Merci de ne renseigner que vos travaux de l'ann√©e, l'outil r√©int√®gre automatiquement les travaux pr√©c√©dents qui sont encore en cours d'amortissement.">
        <svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="black"></circle>
          <rect x="11" y="10" width="2" height="6" fill="white"></rect>
          <circle cx="12" cy="8" r="1" fill="white"></circle>
        </svg>
    </span>
  <details>
    <summary><strong>Saisir une r√©novation ponctuelle</strong></summary>

    <label>Nom du b√¢timent :
      <input type="text" [(ngModel)]="nouvelleReno.nom_adresse"/>
    </label>

    <label>Type de travaux :
      <select [(ngModel)]="nouvelleReno.typeTravaux">
        <option *ngFor="let travaux of travauxTypesLibelles" [ngValue]="travaux.value">
          {{ travaux.label }}
        </option>
      </select>
    </label>

    <label>Date des travaux :
      <input type="date" [(ngModel)]="nouvelleReno.dateTravaux"/>
    </label>

    <label>Type de b√¢timent :
      <select [(ngModel)]="nouvelleReno.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m¬≤) :
      <input type="number" [(ngModel)]="nouvelleReno.surfaceConcernee"/>
    </label>

    <label>Dur√©e amortissement (ann√©e) :
      <input type="number" [(ngModel)]="nouvelleReno.dureeAmortissement"/>
    </label>

    <button (click)="ajouterEntretien()">Ajouter cette r√©novation</button>
  </details>

  <div *ngIf="batimentOnglet.entretiens.length > 0">
    <h3>Liste des entretiens et r√©novations saisis</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Nom / Adresse</th>
        <th>Type de travaux</th>
        <th>Date des travaux</th>
        <th>Type de b√¢timent</th>
        <th>Surface (m¬≤)</th>
        <th>Dur√©e amortissement</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let reno of batimentOnglet.entretiens; let i = index">
        <td>{{ reno.nom_adresse }}</td>
        <td>{{ getLibelleTypeTravaux(reno.typeTravaux) }}</td>
        <td>{{ reno.dateTravaux }}</td>
        <td>{{ getLibelleTypeBatiment(reno.typeBatiment) }}</td>
        <td>{{ reno.surfaceConcernee }}</td>
        <td>{{ reno.dureeAmortissement }}</td>
        <td>
          <button (click)="supprimerRenovation(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>

  <!-- Section 3 : Mobilier -->
  <h2>Mobilier</h2>
  <span class="help-icon" title="Merci de renseigner le nombre de chaque type d'√©quipements en cours d'amortissement comptable, la dur√©e d'amortissement et id√©alement le poids moyen pour les armoires, lits et tables (les donn√©es ADEME sont bas√©es sur des armoires de plusieurs centaines de kilos par exemple, ce qui peut biaiser le calcul).
    Si vous connaisez l'impact carbone du produit en question, vous pouvez l'indiquer pour plus de pr√©cisions.">
        <svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="black"></circle>
          <rect x="11" y="10" width="2" height="6" fill="white"></rect>
          <circle cx="12" cy="8" r="1" fill="white"></circle>
        </svg>
    </span>
  <details>
    <summary><strong>Saisir du mobilier</strong></summary>

    <label>Type de mobilier :
      <select [(ngModel)]="nouveauMobilier.mobilier">
        <option *ngFor="let type of mobilierTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Nombre :
      <input type="number" [(ngModel)]="nouveauMobilier.quantite"/>
    </label>

    <label>Poids (kg) :
      <input type="number" [(ngModel)]="nouveauMobilier.poidsDuProduit"/>
    </label>

    <label>Dur√©e amortissement (ann√©e) :
      <input type="number" [(ngModel)]="nouveauMobilier.dureeAmortissement"/>
    </label>

    <button (click)="ajouterMobilier()">Ajouter ce mobilier</button>
  </details>

  <div class="mobilier-table" *ngIf="batimentOnglet.mobiliers.length > 0">
    <h3>Liste du mobilier saisi</h3>
    <table class="data-table">
      <thead>
      <tr>
        <th>Mobilier</th>
        <th>Quantit√©</th>
        <th>Poids (kg)</th>
        <th>Dur√©e amortissement</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let mobilier of batimentOnglet.mobiliers; let i = index">
        <td>{{ getLibelleTypeMobilier(mobilier.mobilier) }}</td>
        <td>{{ mobilier.quantite }}</td>
        <td>{{ mobilier.poidsDuProduit }}</td>
        <td>{{ mobilier.dureeAmortissement }}</td>
        <td>
          <button (click)="supprimerMobilier(i)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <hr/>
  <app-save-footer [path]="'batimentImmobilisationMobilierOnglet'" (estTermineChange)="onEstTermineChange($event)"></app-save-footer>
</div>
