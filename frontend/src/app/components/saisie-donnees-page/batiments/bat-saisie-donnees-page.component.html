<div class="main-container">
  <!-- Section 1 : Parc immobilier -->
  <h2>Parc immobilier</h2>
  <details>
    <summary><strong>Saisir un nouveau bâtiment</strong></summary>

    <label>Nom / Adresse :
      <input type="text" [(ngModel)]="nouveauBatiment.nom_ou_adresse" />
    </label>

    <label>Date de construction :
      <input type="date" [(ngModel)]="nouveauBatiment.dateConstruction" />
    </label>

    <label>Ce bâtiment a-t-il été construit il y a moins de 50 ans ?
      <select [(ngModel)]="nouveauBatiment.moinsDe50ans">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <div *ngIf="nouveauBatiment.moinsDe50ans === false">
      <label>A-t-il subi une rénovation complète il y a moins de 50 ans ?
        <select [(ngModel)]="nouveauBatiment.renoComplete">
          <option [ngValue]="true">Oui</option>
          <option [ngValue]="false">Non</option>
        </select>
      </label>

      <label>Date de la dernière rénovation complète :
        <input type="date" [(ngModel)]="nouveauBatiment.dateDerniereGrosseRenovation" />
      </label>
    </div>

    <label>Avez-vous une ACV de ce bâtiment ?
      <select [(ngModel)]="nouveauBatiment.acvBatimentRealisee">
        <option [ngValue]="true">Oui</option>
        <option [ngValue]="false">Non</option>
      </select>
    </label>

    <label *ngIf="nouveauBatiment.acvBatimentRealisee">Émissions de GES réelles (tCO2e/an) :
      <input type="number" [(ngModel)]="nouveauBatiment.emissionsGesReellesTCO2" />
    </label>

    <label>Type de bâtiment :
      <select [(ngModel)]="nouveauBatiment.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m²) :
      <input type="number" [(ngModel)]="nouveauBatiment.surfaceEnM2" />
    </label>

    <label>Type de structure :
      <select [(ngModel)]="nouveauBatiment.typeStructure">
        <option *ngFor="let structure of structureTypesLibelles" [ngValue]="structure.value">
          {{ structure.label }}
        </option>
      </select>
    </label>

    <button (click)="ajouterBatiment()">Ajouter ce bâtiment</button>
  </details>

  <div *ngIf="batimentsAjoutes.length > 0">
    <h3>Liste des bâtiments saisis</h3>
      <tr *ngFor="let bat of batimentsAjoutes; let i = index">
        <h3>{{ bat.nom_ou_adresse }}</h3>
        <p>Date construction : {{ bat.dateConstruction }}</p>
        <p>Dernière rénovation : {{ bat.dateDerniereGrosseRenovation }}</p>
        <p>ACV réalisé : {{ bat.acvBatimentRealisee ? 'oui' : 'non' }}</p>
        <p>Émissions GES : {{ bat.emissionsGesReellesTCO2 }} TCO2</p>
        <p>Type / Surface / Structure : {{ getLibelleTypeBatiment(bat.typeBatiment) }} / {{ bat.surfaceEnM2 }} m² / {{ getLibelleTypeStructure(bat.typeStructure) }}</p>
        <button (click)="supprimerBatiment(i)">Supprimer</button>
      </tr>
  </div>
  <hr />

  <!-- Section 2 : Entretien et rénovations -->
  <h2>Entretien et rénovations</h2>
  <details>
    <summary><strong>Saisir une rénovation ponctuelle</strong></summary>

    <label>Nom du bâtiment :
      <input type="text" [(ngModel)]="nouvelleReno.nom_adresse" />
    </label>

    <label>Type de travaux :
      <select [(ngModel)]="nouvelleReno.typeTravaux">
        <option *ngFor="let travaux of travauxTypesLibelles" [ngValue]="travaux.value">
          {{ travaux.label }}
        </option>
      </select>
    </label>

    <label>Date des travaux :
      <input type="date" [(ngModel)]="nouvelleReno.dateTravaux" />
    </label>

    <label>Type de bâtiment :
      <select [(ngModel)]="nouvelleReno.typeBatiment">
        <option *ngFor="let type of batimentTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Surface (m²) :
      <input type="number" [(ngModel)]="nouvelleReno.surfaceConcernee" />
    </label>

    <label>Durée amortissement (année) :
      <input type="number" [(ngModel)]="nouvelleReno.dureeAmortissement" />
    </label>

    <button (click)="ajouterEntretien()">Ajouter cette rénovation</button>
  </details>

  <div *ngIf="renovationsCourantes.length > 0">
    <h3>Liste des entretiens et rénovations saisis</h3>
    <tr *ngFor="let reno of renovationsCourantes; let i = index">
      <h3>{{ reno.nom_ou_adresse }}</h3>
      <p>Type de travaux : {{ getLibelleTypeTravaux(reno.typeTravaux) }}</p>
      <p>Date des travaux : {{ reno.dateTravaux }}</p>
      <p>Type de bâtiment : {{ getLibelleTypeBatiment(reno.typeBatiment) }}</p>
      <p>Surface en m2 : {{ reno.surfaceConcernee }} </p>
      <p>Durée amortissement en années: {{ reno.dureeAmortissement }} </p>
      <button (click)="supprimerRenovation(i)">Supprimer</button>
    </tr>
  </div>
  <hr />

  <!-- Section 3 : Mobilier -->
  <h2>Mobilier</h2>
  <details>
    <summary><strong>Saisir du mobilier</strong></summary>

    <label>Type de mobilier :
      <select [(ngModel)]="nouveauMobilier.mobilier">
        <option *ngFor="let type of mobilierTypesLibelles" [ngValue]="type.value">
          {{ type.label }}
        </option>
      </select>
    </label>

    <label>Nombre :
      <input type="number" [(ngModel)]="nouveauMobilier.quantite" />
    </label>

    <label>Poids (kg) :
      <input type="number" [(ngModel)]="nouveauMobilier.poidsDuProduit" />
    </label>

    <label>Durée amortissement (année) :
      <input type="number" [(ngModel)]="nouveauMobilier.dureeAmortissement" />
    </label>

    <button (click)="ajouterMobilier()">Ajouter ce mobilier</button>
  </details>

  <div *ngIf="mobiliersAjoutes.length > 0">
    <h3>Liste des entretiens et rénovations saisis</h3>
    <tr *ngFor="let mobilier of mobiliersAjoutes; let i = index">
      <h3>{{ getLibelleTypeMobilier(mobilier.mobilier) }}</h3>
      <p>Quantité : {{ mobilier.quantite }}</p>
      <p>Poids du mobilier en kg : {{mobilier.poidsDuProduit }}</p>
      <p>Durée amortissement en années: {{ mobilier.dureeAmortissement }} </p>
      <button (click)="supprimerRenovation(i)">Supprimer</button>
    </tr>
  </div>
  <hr />

  <div *ngFor="let mob of mobiliersAjoutes; let i = index">
    <h3>{{ mob.type }}</h3>
    <p>{{ mob.nombre }} x {{ mob.poids }} kg - {{ mob.dureeAmortissement }} ans</p>
    <button (click)="supprimerMobilier(i)">Supprimer</button>
  </div>
</div>
